<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dokumen Fleksibel A4 - Terpisah</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js"
            onload="renderMathInElement(document.body, {
                delimiters: [
                    {left: '$$', right: '$$', display: true},
                    {left: '\\$', right: '\\$', display: true},
                    {left: '$', right: '$', display: false},
                    {left: '\\$', right: '\\$', display: false}
                ]
            });"></script>
    <style>
        /* CSS Variables for Font Sizes */
        :root {
            --font-size-h1: 24pt;
            --font-size-h2: 16pt;
            --font-size-h3: 14pt;
            --font-size-p: 12pt; /* Default paragraph font size */
            --font-size-table-header: 11pt;
            --font-size-table-data: 11pt;
            --font-size-note: 11pt;
            --font-size-katex-inline: 0.8em; /* For inline KaTeX */
            --font-size-katex-display: 0.8em; /* For display KaTeX (relative to parent) */
        }

        /* CSS untuk tampilan di layar */
        body {
            font-family: 'Times New Roman', Times, serif;
            line-height: 1;
            margin: 0;
            padding: 20px; /* Padding body untuk jarak keseluruhan */
            background-color: #f0f0f0; /* Latar belakang untuk membedakan halaman */
        }

        .page-container {
            width: 210mm; /* Lebar A4 */
            height: 297mm; /* Tinggi A4 FIX */
            margin: 20mm auto; /* Jarak antar container: 2cm atas/bawah, tengah horizontal */
            background-color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Bayangan untuk efek halaman terpisah */
            padding: 40mm 30mm 30mm 40mm; /* Padding 4cm atas, 3cm kanan, 3cm bawah, 4cm kiri */
            box-sizing: border-box; /* Padding termasuk dalam ukuran total */
            page-break-after: always; /* Paksa pemisahan halaman di layar dan print */
            overflow: hidden; /* Konten yang melebihi akan terpotong/tersembunyi */
            position: relative; /* Untuk positioning border merah */
        }

        /* Kotak merah untuk menandai ruang konten yang sebenarnya */
        .page-container::before {
            content: '';
            position: absolute;
            top: 40mm; /* Sesuai padding atas */
            left: 40mm; /* Sesuai padding kiri */
            right: 30mm; /* Sesuai padding kanan */
            bottom: 30mm; /* Sesuai padding bawah */
            border: 1px solid rgba(255, 255, 255, 0);
            pointer-events: none; /* Agar tidak mengganggu interaksi dengan konten */
            z-index: 999; /* Pastikan di atas konten */
        }

        /* CSS untuk media cetak */
        @media print {
            body {
                background-color: white;
                margin: 0;
                padding: 0; /* Hilangkan padding body saat print */
            }

            .page-container {
                width: 100%; /* Biarkan full width saat print */
                height: auto; /* Biarkan browser atur tinggi saat print, karena @page yang mengatur ukuran fisik */
                margin: 0; /* Hilangkan margin antar container saat print (karena @page handle) */
                box-shadow: none; /* Hilangkan bayangan saat print */
                padding: 0; /* Reset padding, margin @page yang ambil alih */
                page-break-after: always; /* Pastikan setiap container jadi halaman terpisah saat print */
                box-sizing: border-box;
            }

            .page-container::before {
                display: none; /* Hilangkan border merah saat print */
            }

            @page {
                size: A4; /* Ukuran halaman A4 */
                margin: 4cm 3cm 3cm 4cm; /* Margin 4cm atas, 3cm kanan, 3cm bawah, 4cm kiri */
            }

            /* Opsional: Atur header/footer jika perlu */
            @page :first {
                /* Gaya khusus halaman pertama */
            }
        }

        /* Gaya umum untuk konten */
        h1 {
            font-size: var(--font-size-h1);
            text-align: center;
            margin-bottom: 30px;
        }
        h2 {
            font-size: var(--font-size-h2);
            border-bottom: 1px solid #000;
            padding-bottom: 5px;
            margin-top: 30px;
        }
        h3 {
            font-size: var(--font-size-h3);
            margin-top: 0px;
        }
        p {
            font-size: var(--font-size-p); /* Menggunakan variabel */
            margin-top: 10px;
            margin-bottom: 10px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            border: 1px solid #000;
            padding: 6px 10px;
            text-align: left;
            font-size: var(--font-size-table-data); /* Menggunakan variabel */
        }
        th {
            background-color: #e0e0e0;
            font-weight: bold;
            font-size: var(--font-size-table-header); /* Menggunakan variabel */
        }
        .math-block {
            display: block;
            margin: 0px 0 0px 0px;
            text-align: left;
            padding: 0px 0;
        }
        .katex-display .katex { 
            line-height: 2.2; /* ini global buat semua display math */
            font-size: var(--font-size-katex-display); /* Menggunakan variabel */
        }
        .note {
            font-style: italic;
            color: #333;
            margin-left: 30px;
            font-size: var(--font-size-note); /* Menggunakan variabel */
        }
        hr {
            border: none;
            border-top: 1px dashed #aaa;
            margin: 20px 0;
        }
        .katex {
            font-size: var(--font-size-katex-inline); /* Menggunakan variabel */
        }

        /* CSS untuk tombol PDF */
        .pdf-button-container {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 9999;
            display: flex; /* Menambahkan flexbox untuk menata tombol */
            gap: 10px; /* Memberi jarak antar tombol */
        }
        .pdf-button {
            background-color: #007bff;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .pdf-button:hover {
            background-color: #0056b3;
        }
        .circle{display:inline-grid;place-items:center;width:56px;height:56px;border-radius:50%;border:0;cursor:pointer}
        .circle:focus{outline:3px solid rgba(96,165,250,0.18);outline-offset:3px}
        .glass {background:#163172; /* lebih transparan */backdrop-filter: blur(6px);}
        @media print {
    button, 
    .action-button, 
    .circle {
        display: none !important;
    }
}
    </style>
</head>
<body>
    <button class="circle glass action-button" style="position: fixed; top: 20px; left: 20px; z-index: 9999;" aria-label="Kembali" onclick="window.location.href='report.html'" title="Kembali">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M15 18l-6-6 6-6" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
    </button>
    <button class="circle glass action-button" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999;" aria-label="Cetak" onclick="window.print()" title="Cetak">
        <img src="https://img.icons8.com/ios/50/ffffff/print.png" alt="Print" style="width: 24px; height: 24px;">
    </button>

    <!-- Container 1: Judul + Data Balok (A) -->
    <div class="page-container">
        <h1>LAPORAN PERHITUNGAN STRUKTUR BALOK LANTAI</h1>

        <div class="section">
            <h2>A. DATA BALOK LANTAI</h2>

            <h3>1. Data Material dan Dimensi</h3>
            <table>
                <tr><th>Parameter</th><th>Simbol</th><th>Nilai</th><th>Satuan</th></tr>
                <tr><td>Mutu Beton</td><td>$f'_c$</td><td>20</td><td>MPa</td></tr>
                <tr><td>Mutu Baja Tulangan</td><td>$f_y$</td><td>400</td><td>MPa</td></tr>
                <tr><td>Mutu Baja Sengkang</td><td>$f_{ys}$</td><td>240</td><td>MPa</td></tr>
                <tr><td>Tinggi Balok</td><td>$h$</td><td>400</td><td>mm</td></tr>
                <tr><td>Lebar Balok</td><td>$b$</td><td>250</td><td>mm</td></tr>
                <tr><td>Tebal Selimut Beton</td><td>$s$</td><td>40</td><td>mm</td></tr>
                <tr><td>Diameter Tulangan Utama</td><td>$D$</td><td>19</td><td>mm</td></tr>
                <tr><td>Diameter Tulangan Sengkang</td><td>$D_s$</td><td>10</td><td>mm</td></tr>
                <tr><td>Tinggi Efektif Balok</td><td>$d$</td><td>340.5</td><td>mm</td></tr>
                <tr><td>Panjang Bentang Balok</td><td>$L$</td><td>6.7</td><td>m</td></tr>
            </table>

            <h3>2. Beban Ultimit Desain</h3>
            <table>
                <tr><th>Parameter</th><th>Simbol</th><th>Nilai</th><th>Satuan</th></tr>
                <tr><td>Momen Ultimit Positif</td><td>$M_u^+$</td><td>104.4</td><td>kNm</td></tr>
                <tr><td>Momen Ultimit Negatif</td><td>$M_u^-$</td><td>139.2</td><td>kNm</td></tr>
                <tr><td>Gaya Geser Ultimit</td><td>$V_u$</td><td>84.15</td><td>kN</td></tr>
            </table>
        </div>
    </div>

    <!-- Container 2: Parameter Konstan (lanjutan dari A) -->
    <div class="page-container">
        <div class="section">
            <h3>3. Parameter Konstan</h3>
            <div class="math-block">
                \$
                \text{Tinggi Efektif:} \quad d = h - s - D_s - 0.5 \cdot D \\
                \quad = 400 - 40 - 10 - 0.5 \cdot 19 = \mathbf{340.5} \text{ mm} \\
                \beta_1 = 0.85 \quad (\text{karena } f'_c = 20 \text{ MPa} \le 28 \text{ MPa}) \\
                \phi = 0.80 \quad (\text{Faktor Reduksi Kekuatan Lentur}) \\
                \phi_v = 0.75 \quad (\text{Faktor Reduksi Kekuatan Geser})
                \$
            </div>
        </div>
    </div>

    <!-- Container 3: Perhitungan Tulangan Lentur (B) -->
    <div class="page-container">
        <div class="section">
            <h2>B. PERHITUNGAN TULANGAN LENTUR</h2>

            <h3>1. Batasan Rasio Tulangan</h3>
            <div class="math-block">
                \$
                \rho_{\min} = \frac{1.4}{f_y} = \frac{1.4}{400} = \mathbf{0.0035} \\
                \rho_{\text{balanced}} (\rho_b) = \frac{0.85 f'_c \beta_1}{f_y} \left( \frac{600}{600 + f_y} \right) \\
                \quad = \frac{0.85 \cdot 20 \cdot 0.85}{400} \left( \frac{600}{600 + 400} \right) = \mathbf{0.02167} \\
                \rho_{\max} = 0.75 \cdot \rho_b = 0.75 \cdot 0.02167 = \mathbf{0.01625}
                \$
            </div>

            <h3>2. Tulangan Momen Positif ($M_u^+ = 104.4 \text{ kNm}$)</h3>
            <div class="math-block">
                \$
                \text{Koefisien Ketahanan Balok }(R_n) = \frac{M_u}{\phi \cdot b \cdot d^2} \\
                \quad = \frac{104.4 \times 10^6 \text{ Nmm}}{0.80 \cdot 250 \text{ mm} \cdot (340.5 \text{ mm})^2} \approx \mathbf{3.585} \text{ MPa} \\
                \$
            </div>
            <div class="math-block">
                \$
               \text{Rasio Tulangan } (\rho) = \frac{0.85 f'_c}{f_y} \left( 1 - \sqrt{1 - \frac{2 R_n}{0.85 f'_c}} \right) \\
                \quad = \frac{0.85 \cdot 20}{400} \left( 1 - \sqrt{1 - \frac{2 \cdot 3.585}{0.85 \cdot 20}} \right) \approx \mathbf{0.00962} \\
                \text{Cek Batas:} \quad \rho_{\min} = 0.0035 < \rho = 0.00962 < \rho_{\max} = 0.01625 \quad (\text{OK}) \\
                \text{Luas Tulangan Perlu } (A_s) = \rho \cdot b \cdot d \\
                \quad = 0.00962 \cdot 250 \text{ mm} \cdot 340.5 \text{ mm} \approx \mathbf{818.57} \text{ mm}^2 \\
                \text{Jumlah Tulangan:} \quad n = \frac{A_s}{A_{D19}} = \frac{818.57 \text{ mm}^2}{283.53 \text{ mm}^2} \approx 2.88 \rightarrow \text{Dipilih } \mathbf{3\text{D}19} \\
                \text{Luas Terpasang } (A_{s, \text{tp}}) = 3 \cdot 283.53 \text{ mm}^2 \approx \mathbf{850.59} \text{ mm}^2
                \$
            </div>
        </div>
    </div>

    <!-- Container 4: Lanjutan Perhitungan Tulangan Lentur (Momen Negatif) -->
    <div class="page-container">
        <div class="section">
            <h3>3. Tulangan Momen Negatif ($M_u^- = 139.2 \text{ kNm}$)</h3>
            <div class="math-block">
                \$
                \text{Koefisien Ketahanan Balok }(R_n) = \frac{139.2 \times 10^6 \text{ Nmm}}{0.80 \cdot 250 \text{ mm} \cdot (340.5 \text{ mm})^2} \approx \mathbf{4.787} \text{ MPa} \\
                \text{Rasio Tulangan } (\rho) = \frac{0.85 \cdot 20}{400} \left( 1 - \sqrt{1 - \frac{2 \cdot 4.787}{0.85 \cdot 20}} \right) \approx \mathbf{0.01308} \\
                \text{Cek Batas:} \quad \rho_{\min} = 0.0035 < \rho = 0.01308 < \rho_{\max} = 0.01625 \quad (\text{OK}) \\
                \text{Luas Tulangan Perlu } (A_s) = \rho \cdot b \cdot d \\
                \quad = 0.01308 \cdot 250 \text{ mm} \cdot 340.5 \text{ mm} \approx \mathbf{1113.16} \text{ mm}^2 \\
                \text{Jumlah Tulangan:} \quad n = \frac{A_s}{A_{D19}} = \frac{1113.16 \text{ mm}^2}{283.53 \text{ mm}^2} \approx 3.93 \rightarrow \text{Dipilih } \mathbf{4\text{D}19} \\
                \text{Luas Terpasang } (A_{s, \text{tp}}) = 4 \cdot 283.53 \text{ mm}^2 \approx \mathbf{1134.12} \text{ mm}^2
                \$
            </div>
        </div>
    </div>

    <!-- Container 5: Perhitungan Tulangan Geser (C) -->
    <div class="page-container">
        <div class="section">
            <h2>C. PERHITUNGAN TULANGAN GESER (Sengkang)</h2>
            <div class="note">
                Gaya Geser Ultimit $V_u = 84.15 \text{ kN}$. Digunakan sengkang $\text{D}10$ dengan 2 kaki.
            </div>

            <h3>1. Kekuatan Geser Beton dan Pengecekan</h3>
            <div class="math-block">
                \$
                \text{Kekuatan Geser Nominal Beton }(V_c) = \frac{1}{6} \lambda \sqrt{f'_c} \cdot b \cdot d \quad (\lambda = 1.0) \\
                \quad = \frac{1}{6} \cdot 1.0 \cdot \sqrt{20 \text{ MPa}} \cdot 250 \text{ mm} \cdot 340.5 \text{ mm} \\
                \quad \approx 63102 \text{ N} \approx \mathbf{63.10} \text{ kN}
                \$
            </div>
            <div class="math-block">
                \$
                \text{Kekuatan Geser Terfaktor } (\phi V_c) = 0.75 \cdot 63.10 \text{ kN} \approx \mathbf{47.33} \text{ kN}
                \$
            </div>
            <div class="math-block">
                \$
                \text{Batas Minimum} \quad \frac{1}{2} \phi V_c = 0.5 \cdot 47.33 \text{ kN} \approx \mathbf{23.67} \text{ kN}
                \$
            </div>
            <p class="note">
                Karena $V_u = 84.15 \text{ kN} > \phi V_c = 47.33 \text{ kN}$, maka **tulangan geser diperlukan** dan harus dihitung.
            </p>

            <h3>2. Perhitungan Jarak Sengkang</h3>
            <div class="math-block">
                \$
                \text{Kekuatan Geser Tulangan Perlu } (V_s) \ge \frac{V_u - \phi V_c}{\phi_v} \\
                \ge \frac{84.15 \text{ kN} - 47.33 \text{ kN}}{0.75} \approx \mathbf{49.09} \text{ kN}
                \$
            </div>
            <div class="math-block">
                \$
                \text{Luas Sengkang } (A_v) = 2 \cdot \frac{1}{4} \pi D_s^2 = 2 \cdot \frac{1}{4} \pi (10 \text{ mm})^2 \approx \mathbf{157.08} \text{ mm}^2
                \$
            </div>
            <div class="math-block">
                \$
                \text{Jarak Sengkang Hitungan } (s_{\text{hitungan}}) = \frac{A_v \cdot f_{ys} \cdot d}{V_s} \\
                \quad = \frac{157.08 \text{ mm}^2 \cdot 240 \text{ MPa} \cdot 340.5 \text{ mm}}{49.09 \times 10^3 \text{ N}} \approx \mathbf{261.2} \text{ mm}
                \$
            </div>

        </div>
    </div>

    <!-- Container 6: Kontrol Jarak Maksimum -->
    <div class="page-container">
        <div class="section">
            <h3>3. Kontrol Jarak Maksimum</h3>
            <div class="math-block">
                \$
                s_{\max, 1} = \frac{d}{2} = \frac{340.5}{2} = \mathbf{170.25} \text{ mm}
                \$
            </div>
            <div class="math-block">
                \$
                s_{\max, 2} = 600 \text{ mm}
                \$
            </div>
            <p class="note">
                Karena $s_{\text{hitungan}} (261.2 \text{ mm}) > s_{\max, 1} (170.25 \text{ mm})$, maka jarak sengkang yang dipakai adalah **$s_{\max, 1}$**. Dipilih untuk dibulatkan menjadi $\mathbf{170 \text{ mm}}$ agar mudah di lapangan.
            </p>

            <p style="margin-top: 15px;">**Tulangan Geser Terpasang: D10 - 170 mm**</p>
        </div>
    </div>

    <!-- Container 7: Rekapitulasi Hasil Desain (D) -->
    <div class="page-container">

        <div class="section">
            <h2>D. REKAPITULASI HASIL DESAIN</h2>
            <table>
                <tr><th colspan="2">Parameter Desain</th><th>Hasil Tulangan Terpasang</th></tr>
                <tr><td colspan="2">Tinggi Efektif Balok ($d$)</td><td>$340.5 \text{ mm}$</td></tr>
                <tr><td rowspan="2">Tulangan Lentur Utama</td><td>Positif (Lapangan)</td><td>$\mathbf{3\text{D}19}$</td></tr>
                <tr><td>Negatif (Tumpuan)</td><td>$\mathbf{4\text{D}19}$</td></tr>
                <tr><td colspan="2">Tulangan Geser (Sengkang)</td><td>$\mathbf{\text{D}10 - 170 \text{ mm}}$</td></tr>
            </table>
        </div>
    </div>
    <!-- Tambahkan ini sebelum <script src="pdf-maker.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="pdf-maker.js"></script>
</body>
</html>